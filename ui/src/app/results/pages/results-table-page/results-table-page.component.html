<table
  mat-table
  *ngIf="gates$ | async as gates"
  [dataSource]="results$ | async"
  class="results-table"
>
  <ng-container matColumnDef="number">
    <th mat-header-cell *matHeaderCellDef>Номер</th>
    <td
      mat-cell
      *matCellDef="let element"
      [attr.rowspan]="element.rowSpan"
      [style.display]="element.rowSpan ? '' : 'none'"
    >
      {{ element.participantNumber }}
    </td>
  </ng-container>
  <ng-container matColumnDef="name">
    <th mat-header-cell *matHeaderCellDef>ФИО</th>
    <td
      mat-cell
      *matCellDef="let element"
      [attr.rowspan]="element.rowSpan"
      [style.display]="element.rowSpan ? '' : 'none'"
    >
      {{ element.participantData?.name }}
    </td>
  </ng-container>
  <ng-container matColumnDef="category">
    <th mat-header-cell *matHeaderCellDef>Класс</th>
    <td
      mat-cell
      *matCellDef="let element"
      [attr.rowspan]="element.rowSpan"
      [style.display]="element.rowSpan ? '' : 'none'"
    >
      {{ element.participantData?.group }}
    </td>
  </ng-container>
  <ng-container matColumnDef="best">
    <th mat-header-cell *matHeaderCellDef>Лучший результат</th>
    <td
      mat-cell
      *matCellDef="let element"
      [attr.rowspan]="element.rowSpan"
      [style.display]="element.rowSpan ? '' : 'none'"
    >
      {{ element.bestTotal }}
    </td>
  </ng-container>
  <ng-container matColumnDef="place">
    <th mat-header-cell *matHeaderCellDef>Место</th>
    <td
      mat-cell
      *matCellDef="let element"
      [attr.rowspan]="element.rowSpan"
      [style.display]="element.rowSpan ? '' : 'none'"
    >
      {{ element.place }}
    </td>
  </ng-container>
  <ng-container *ngFor="let gate of gates" [matColumnDef]="'gate' + gate">
    <th mat-header-cell *matHeaderCellDef>{{ gate }}</th>
    <td mat-cell *matCellDef="let element">
      {{ element.attempt.judgeData[gate] }}
    </td>
  </ng-container>
  <ng-container matColumnDef="start">
    <th mat-header-cell *matHeaderCellDef>Старт</th>
    <td mat-cell *matCellDef="let element">
      {{ element.attempt.judgeData.start }}
    </td>
  </ng-container>
  <ng-container matColumnDef="finish">
    <th mat-header-cell *matHeaderCellDef>Финиш</th>
    <td mat-cell *matCellDef="let element">
      {{ element.attempt.judgeData.finish }}
    </td>
  </ng-container>
  <ng-container matColumnDef="penalty">
    <th mat-header-cell *matHeaderCellDef>Штраф</th>
    <td mat-cell *matCellDef="let element">
      {{ element.attempt.penalty }}
    </td>
  </ng-container>
  <ng-container matColumnDef="total">
    <th mat-header-cell *matHeaderCellDef>Итого</th>
    <td mat-cell *matCellDef="let element">
      {{ element.attempt.totalString }}
    </td>
  </ng-container>
  <tr mat-header-row *matHeaderRowDef="getColumnNames(gates)"></tr>
  <tr mat-row *matRowDef="let row; columns: getColumnNames(gates)"></tr>
</table>
<!-- <div>
 state - {{stateDebug$ | async}}
</div> -->
